tinymce.PluginManager.add("showurl",function(e,t){e.addButton("showurl",{text:"Show URL",title:"Show URL plugin",onclick:function(){var t=e.selection.getContent({format:"html"});var n={invalid_elements:"script,object,embed,link,style,form,input,iframe",valid_elements:"a[href],img[src],li,ul,ol,span,div,p,br,blockquote,h1,h2,h3,h4,h5,h6,strong/b,em/i,li,ul,ol"};var r=new tinymce.html.Schema(n);var i=new tinymce.html.DomParser({},r);var s=new tinymce.html.Serializer({},r);var o=i.parse(t);var u=o.getAll("a")[0];console.log("RAW DATA = "+t);var a="";var f="";if(u&&!u.isEmpty()){f=e.selection.getContent({format:"text"});console.log("Link value = "+f);a=u.attr("href");if(a){console.log("Link href = "+a)}else{console.log("No URL found! "+a)}}if(!a||a===""){e.windowManager.alert("No URL found in selection.")}else{e.windowManager.open({title:f,url:a,width:640,height:480,buttons:[{text:"Close",onclick:"close"}]})}}});e.addMenuItem("showurl",{text:"Show URL plugin",context:"tools",onclick:function(){e.windowManager.alert("Plugin developed by Danny Calleri 2013")}})})